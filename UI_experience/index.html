<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teklab AI - Technical Assistant</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîß</text></svg>">
    
    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="light-theme">
    
    <!-- Main Container -->
    <div class="app-container">
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="btn-new-chat" id="newChatBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    New chat
                </button>
            </div>
            
            <div class="sidebar-content">
                <!-- Conversazioni raggruppate per data -->
                <div class="conversation-group" id="conversationsList">
                    <!-- Popolato dinamicamente da JS -->
                </div>
            </div>
            
            <div class="sidebar-footer">
                <button class="sidebar-btn" id="settingsBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m0-6h6m-6 0H6"></path>
                    </svg>
                    Settings
                </button>
                
                <button class="sidebar-btn" id="themeToggle">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <span id="themeLabel">Light mode</span>
                </button>
            </div>
        </aside>
        
        <!-- Main Chat Area -->
        <main class="chat-container">
            <!-- Header Mobile -->
            <header class="chat-header">
                <button class="btn-menu" id="menuToggle">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                
                <div class="header-title">
                    <span class="logo-emoji">üîß</span>
                    <h1>Teklab AI</h1>
                    <span class="queue-status" id="queueStatus" style="display: none; margin-left: 15px; font-size: 14px; color: #666;"></span>
                </div>
                
                <button class="btn-new-chat-mobile" id="newChatBtnMobile">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </button>
            </header>
            
            <!-- Messages Area -->
            <div class="messages-wrapper">
                <div class="messages-container" id="messagesContainer">
                    <!-- Welcome Screen (mostrato solo se chat vuota) -->
                    <div class="welcome-screen" id="welcomeScreen">
                        <div class="welcome-content">
                            <div class="logo-large">
                                <span class="logo-emoji-large">üîß</span>
                                <h2>Teklab AI</h2>
                            </div>
                            <p class="welcome-subtitle">Your Technical Sales Assistant for Industrial Sensors</p>
                            
                            <div class="suggestions">
                                <button class="suggestion-card" data-prompt="What's the difference between TK3+ and TK4?">
                                    <div class="suggestion-icon">‚öôÔ∏è</div>
                                    <div class="suggestion-text">TK3+ vs TK4 comparison</div>
                                </button>
                                
                                <button class="suggestion-card" data-prompt="Which sensor for R410A refrigerant?">
                                    <div class="suggestion-icon">‚ùÑÔ∏è</div>
                                    <div class="suggestion-text">R410A sensor selection</div>
                                </button>
                                
                                <button class="suggestion-card" data-prompt="What are ATEX requirements for ammonia?">
                                    <div class="suggestion-icon">‚ö†Ô∏è</div>
                                    <div class="suggestion-text">ATEX for ammonia systems</div>
                                </button>
                                
                                <button class="suggestion-card" data-prompt="How does MODBUS communication work?">
                                    <div class="suggestion-icon">ÔøΩ</div>
                                    <div class="suggestion-text">MODBUS setup guide</div>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- I messaggi verranno inseriti qui dinamicamente -->
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="input-wrapper">
                <div class="input-container">
                    <form id="messageForm" class="message-form">
                        <textarea 
                            id="messageInput" 
                            class="message-input" 
                            placeholder="Message Teklab AI..."
                            rows="1"
                            maxlength="2000"
                        ></textarea>
                        
                        <button 
                            type="submit" 
                            class="btn-send" 
                            id="sendBtn"
                            disabled
                        >
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                            </svg>
                        </button>
                    </form>
                    
                    <div class="input-footer">
                        <span class="footer-text">
                            Teklab AI can make mistakes. Verify technical specifications with official documentation.
                        </span>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Connecting to backend...</p>
    </div>
    
    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>
    
    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/api.js"></script>
    <script src="assets/js/app.js"></script>
</body>
</html>
